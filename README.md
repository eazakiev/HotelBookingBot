# Hotel Booking Bot

***
## Описание
+ Telegram-бот предназначен для поиска отелей на сайте Hotels.com по критериям, 
задаваемым пользователями. 
+ Используется открытый API Hotels, который расположен на
сайте rapidapi.com.
+ Бот работает асинхронно. Из библиотеки для работы с Telegram в запросы к базе данных.
+ Предусмотрена работа с двумя ключами API Rapid API вместо одного.
+ Реализована логика работы с выбранными отелями, предусмотрена возможность просмотра фотографий отелей, выбора локации, бронирование отелей.
+ Создана удобная система возврата в главное меню.

Пользователь с помощью специальных команд бота может выполнить следующие
действия (получить следующую информацию):
+ /start 
>*Используется для сброса текущего состояния бота и возврата в главное меню*
+ /help
>*Получить справку с описанием команд и работы с ботом*
+ /lowprice
>*Узнать топ самых дешёвых отелей в городе*
+ /highprice
>*Узнать топ самых дорогих отелей в городе*
+ /bestdeal
>*Узнать топ отелей, наиболее подходящих по цене и расположению от центра*
+ /history
>*Узнать историю поиска отелей*
***

## Установка
Клонируйте репозиторий.
Необходимо, что-бы у вас был доступ к секретным ключам вашего Telegram-бота и RapidAPI. 
Создайте файл .env в папке проекта. Занесите в этот файл значения ваших секретных ключей:

```
BOT_TOKEN="вставьте свой ТОКЕН бота"

ADMINS="вставьте свой номер администратора"

USE_REDIS=False

RAPID_API_KEY="вставьте свой ключ RAPIDAPI"

ANOTHER_RAPID_API_KEY="вставьте свой другой ключ RAPIDAPI" (или оставить только RAPID_API_KEY, если вы уверены, что 500 запросов в месяц будет достаточно)

REQUESTS_LIMIT_REACHED="False_по умолчанию используется для смены ключей" (по умолчанию имеет значение "False", изменять его нет необходимости
Эти параметры создаются для изменения ключа API при исчерпании лимита запроса)
```


Создайте и активируйте виртуальное окружение.
Установите зависимости в виртуальном окружении env/ :
```
pip install -r requirements.txt
```

## Настойка базы данных MongoDB
1. Следуя пошаговой инструкции, зарегистрируйтесь и создайте свой аккаунт на сайте: https://account.mongodb.com/. 
Для пользователей из России регистрация возможна с помощью VPN.
2. Создайте проект под названием **telegrambot**.
3. Создайте бесплатный кластер под названием **hotels**. Имя пользователя и пароль, введенные при создании кластера,
сохраните для записи в переменную окружения **.env**, согласно шаблону .env.template:
+ DB_USER="name"
+ DB_PASS="password"
+ DB_NAME=mongodb 
+ DB_HOST=27017
4. Сопируйте полученный url и вставьте в модуль **client.py** в переменную **client**.

**Документация по MongoDB**: https://docs.mongodb.com/manual/
***

## Запуск
Находясь в папке проекта, запустите файл main.py
```
python main.py
```
